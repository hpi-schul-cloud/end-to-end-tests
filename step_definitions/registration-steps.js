'use strict';
let administration = require('../page-objects/administration');
let pupilLogin = require('../page-objects/pupilLogin');
let registration = require('../page-objects/registration');
let loginData = require('../shared-objects/loginData');
let performLogin = require('../page-objects/performLogin');
let shared = ({loginData, performLogin});
let page = ({pupilLogin});
const Login = require('../shared-objects/loginData');
let teacherLogin = require('../page-objects/teacherLogin');


Given(/^teacher has come to schul-cloud home page$/, function () {
    return helpers.loadPage(shared.loginData.url, 10);
});
Given(/^teacher has logged in$/, function () {
    return teacherLogin.performLogin(Login.defaultTeacherUsername, Login.defaultTeacherpassword);
});
// User is under 14
When(/^teacher has created a user with (.*), (.*), (.*) without submitting the age$/, function (firstnameSTUDENT, lastnameSTUDENT, emailSTUDENT) {

    return administration.createNewPupil(firstnameSTUDENT, lastnameSTUDENT, emailSTUDENT)
});
When(/^teacher chooses the student with (.*) from the table$/, function (emailSTUDENT) {
    return registration.chooseAPupilFromTheTable(emailSTUDENT);
});

When(/^teacher has created a link for this student$/, function () {
    return registration.generateLink();
});
When(/^user navigates a Link$/, function () {
    return registration.openTheLink();
});
When(/^user should choose that the user is under 16$/, function () {
    return registration.submitThatTheUserIsUnder16();
});
When(/^user should submit the birthday information$/, function () {
    let student_age = 13;
    return registration.parentsSetStudentsAge(student_age);
});
Then(/^parents of the student should submit their (.*), (.*), (.*) and submit a consent$/, function (firstnamePARENT, lastnamePARENT, emailPARENT) {
    return registration.parentsSetTheirData(firstnamePARENT, lastnamePARENT, emailPARENT);
});
Then(/^parents should submit a code from the email (.*) generated by the system$/, function (emailPARENT) {
    return registration.parentsSetPin(emailPARENT);
});
Then(/^parents press login button$/, function () {
    return helpers.loadPage(shared.loginData.logout, 10);
});
Then(/^user can log in with the data which was set by the parents$/, function () {
    return registration.studentLogsIn();
});
// USER IS BETWEEN 14 and 16
/*      
When(/^user navigates a link$/, function () {
    return registration.openTheLink(); 
});
When(/^user should choose that the user is under 16$/, function () {
    return registration.submitThatTheUserIsUnder16();
});
When(/^user should submit the birthday information$/, function () {
    let student_age = 13;
    return registration.parentsSetStudentsAge(student_age);
});
When(/^parents of the student should submit a consent$/, function () {
    return registration.parentsSetTheirData();
});
When(/^parents should submit a code from the email generated by the system$/, function () {
    return registration.parentsSetPin();
});
When(/^parents press login button$/, function () {
    return registration.parentsGoToLogin();
});
When(/^user can log in with the data which was set by the parents$/, function () {
    return helpers.loadPage(shared.loginData.url, 10);
}); */
